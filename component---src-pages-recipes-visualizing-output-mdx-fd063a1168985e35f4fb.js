"use strict";(self.webpackChunkelyra_ai_site=self.webpackChunkelyra_ai_site||[]).push([[1380],{964:function(e,t,a){a.r(t),a.d(t,{Title:function(){return s},_frontmatter:function(){return p},default:function(){return d}});var n,i=a(3366),o=(a(7294),a(4983)),r=a(4295),l=["components"],s=function(){return(0,o.kt)("span",null,"Visualizing output from your notebooks or Python scripts")},p={},c=(n="PageDescription",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",e)}),m={Title:s,_frontmatter:p},u=r.Z;function d(e){var t=e.components,a=(0,i.Z)(e,l);return(0,o.kt)(u,Object.assign({},m,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(c,{mdxType:"PageDescription"},(0,o.kt)("p",null,"Pipelines that you run on Kubeflow Pipelines can optionally produce output that is rendered in the Kubeflow Pipelines UI. For example, a model training script might expose quality metrics.")),(0,o.kt)("p",null,"You can try the visualizations shown in this document using ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/elyra-ai/examples/tree/main/pipelines/visualize_output_in_kubeflow_pipelines_ui"},"this pipeline in the Elyra examples repository"),"."),(0,o.kt)("h2",null,"Visualizing output using the Kubeflow Pipelines output viewer"),(0,o.kt)("p",null,"The output viewer in the Kubeflow Pipelines UI can render output such as a confusion matrix, ROC curve, or markdown, that is displayed in the Kubeflow Pipelines UI."),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"800px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"52.43055555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbElEQVQoz5WSu24UMRSG9znyGLwP75AG0SEknoCCBroUCGiQaCESBRRIpEwQoAgi5QKzmxnf7Zmx/SHbu5AtIrRH+hv7nO9cF7+vNeedxhjNcrViGARSSoZhwFqDMU3OOWKcKZZz5jZbGC0xWnF2NbDsNdYnLoTg5OocJXWFCyEa3M/0JhFTwlqL0pp5nvE+VL9xHFkoJRmE4nKlkcYzztA7y2nXIYVGKYWQkuAdg02cdokpgrUOKRXTVIC++YRQgKrSe6G5Fpplr6p6oSjJNv+lIsh4Z/BWQg7rJjPpxgQWxbkElWB9Qw2ktoCptmr4cqb4/N2x0hAmMCEzzrHO9m+FJXhbm0T/gDGmWsW9l7C3DwcfMj+6iHTlNZE2wP9pG5h5+Dpz50Hm2fvMx2+JTq2BaVdgasAXnzL3X2X2n2fuPoWjnw0YdwWmNfDdMTw5hMdv4dEb+PqrLWcnYDvsWE9jHJumtcYQ6ntZyh9i7vpvoriVWQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Example notebook output",title:"Example notebook output",src:"/static/4a9481a79856de262c6262323b7e9bfc/acfc1/kfp_mlpipeline_ui_metadata.png",srcSet:["/static/4a9481a79856de262c6262323b7e9bfc/7fc1e/kfp_mlpipeline_ui_metadata.png 288w","/static/4a9481a79856de262c6262323b7e9bfc/a5df1/kfp_mlpipeline_ui_metadata.png 576w","/static/4a9481a79856de262c6262323b7e9bfc/acfc1/kfp_mlpipeline_ui_metadata.png 800w"],sizes:"(max-width: 800px) 100vw, 800px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"To produce this output add code to your notebook or Python script that creates a file named ",(0,o.kt)("inlineCode",{parentName:"p"},"mlpipeline-ui-metadata.json")," in the current working directory. Refer to ",(0,o.kt)("a",{parentName:"p",href:"https://www.kubeflow.org/docs/pipelines/sdk/output-viewer/#introduction"},(0,o.kt)("em",{parentName:"a"},"Visualize Results in the Pipelines UI")," in the Kubeflow Pipelines documentation")," to learn about supported visualizations and the format of the ",(0,o.kt)("inlineCode",{parentName:"p"},"mlpipeline-ui-metadata.json")," file. "),(0,o.kt)("p",null,"The following code snippet produces a confusion matrix that is rendered in the output viewer as shown above: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'import json\nimport pandas as pd \n\nmatrix = [\n    [\'yummy\', \'yummy\', 10],\n    [\'yummy\', \'not yummy\', 2],\n    [\'not yummy\', \'yummy\', 6],\n    [\'not yummy\', \'not yummy\', 7]\n]\n\ndf = pd.DataFrame(matrix,columns=[\'target\',\'predicted\',\'count\'])\n\nmetadata = {\n    "outputs": [\n        {\n            "type": "confusion_matrix",\n            "format": "csv",\n            "schema": [\n                {\n                    "name": "target",\n                    "type": "CATEGORY"\n                },\n                {\n                    "name": "predicted",\n                    "type": "CATEGORY"\n                },\n                {\n                    "name": "count",\n                    "type": "NUMBER"\n                }\n            ],\n            "source": df.to_csv(header=False, index=False),\n            "storage": "inline",\n            "labels": [\n                "yummy",\n                "not yummy"\n            ]\n        }\n    ]\n}\n\nwith open(\'mlpipeline-ui-metadata.json\', \'w\') as f:\n    json.dump(metadata, f)\n')),(0,o.kt)("p",null,"Note that the output is displayed only after notebook or Python script processing has completed."),(0,o.kt)("h2",null,"Visualizing scalar performance metrics in the Kubeflow Pipelines UI"),(0,o.kt)("p",null,"If your notebooks or Python scripts calculate scalar performance metrics they can be displayed as part of the run output in the Kubeflow Pipelines UI."),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"318px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"54.861111111111114%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLUlEQVQoz41S0W6DMAzk/3+qe9oTCB6glKFqDKpCKQXBQJCQcJM9UTEK0iIdwXZi39kxAGCaJsyL/pf20786t7cM+uT5Ha53RJrd2BndR1iRgP0l8R4KlK1mP8W9o49rmv4pvoShtX6pfG8UzjeJz1ziI6OEIzBpKKUxjiOEkKB7W2CGUkpcrymqqmJorRZCf/d10b3WcMKu63A4vMG0LJimhe+2xX/Xi+T1QIg2MRZC7GKOk/w1W2ZIgcfjwXLLskQQBPA8j+H7PhzHQRRFOJ1OT59t28jzfD9hGIZwXRdxHPNB2pMkQd/3GIYBbdvicrlwYWJHfmI6J3pKJoNkZlnGF4qi4J7WdY2maTg2D45sSr5sz3owxt60tpq+N4iXoVAlpdQm5ve15dt6hz+761i4NuQSXQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Example notebook output",title:"Example notebook output",src:"/static/a544baad145c817707f57e0fb244be6e/9c955/kfp_run_metrics.png",srcSet:["/static/a544baad145c817707f57e0fb244be6e/7fc1e/kfp_run_metrics.png 288w","/static/a544baad145c817707f57e0fb244be6e/9c955/kfp_run_metrics.png 318w"],sizes:"(max-width: 318px) 100vw, 318px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"To expose the metrics, add code to the notebook or Python script that stores them in a file named ",(0,o.kt)("inlineCode",{parentName:"p"},"mlpipeline-metrics.json")," in the current working directory. Refer to ",(0,o.kt)("a",{parentName:"p",href:"https://www.kubeflow.org/docs/pipelines/sdk/pipelines-metrics/"},(0,o.kt)("em",{parentName:"a"},"Pipeline Metrics")," in the Kubeflow Pipelines documentation")," to learn more about the content of this file."),(0,o.kt)("p",null,"The following code snippet produces this file and records two metrics: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  import json\n   \n  # ...\n  # calculate Accuracy classification score\n  accuracy_score = 0.6\n  # calculate Area Under the Receiver Operating Characteristic Curve (ROC AUC)\n  roc_auc_score = 0.75\n \n  metrics = {\n    'metrics': [\n        {\n            'name': 'accuracy-score',\n            'numberValue':  accuracy_score,\n            'format': 'PERCENTAGE'\n        },\n        {\n            'name': 'roc-auc-score',\n            'numberValue':  roc_auc_score,\n            'format': 'RAW'       \n        }\n    ]\n  }\n\n  with open('mlpipeline-metrics.json', 'w') as f:\n    json.dump(metrics, f)\n")),(0,o.kt)("p",null,"Note that the metrics are displayed after notebook or Python script processing has completed."))}d.isMDXComponent=!0},4295:function(e,t,a){a.d(t,{Z:function(){return w}});var n=a(7294),i=a(8650),o=a.n(i),r=a(5444),l=a(9403),s=a(5611),p=a(5900),c=a.n(p),m=function(e){var t,a=e.title,i=e.theme,o=e.tabs,r=void 0===o?[]:o;return n.createElement("div",{className:c()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=r.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===i,t))},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12"},n.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},u=function(e){var t=e.relativePagePath,a=e.repository,i=(0,r.useStaticQuery)("1364590287").site.siteMetadata.repository,o=a||i,l=o.baseUrl,s=o.subDirectory,p=l+"/edit/"+o.branch+s+"/src/pages"+t;return l?n.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},n.createElement("div",{className:"bx--col"},n.createElement("a",{className:"EditLink-module--link--IDrl1",href:p},"Edit this page on GitHub"))):null},d=a(4275),g=a(1721),h=function(e){function t(){return e.apply(this,arguments)||this}return(0,g.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,i=e.slug,l=i.split("/").filter(Boolean).slice(-1)[0],s=a.map((function(e){var t,a=o()(e,{lower:!0,strict:!0}),s=a===l,p=new RegExp(l+"/?(#.*)?$"),m=i.replace(p,a);return n.createElement("li",{key:e,className:c()((t={},t["PageTabs-module--selected-item--aBB0K"]=s,t),"PageTabs-module--list-item--024o6")},n.createElement(r.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return n.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},n.createElement("nav",{"aria-label":t},n.createElement("ul",{className:"PageTabs-module--list--xLqxG"},s))))))},t}(n.Component),b=h,f=a(2881),k=a(6958),y=a(36),A=function(e){var t=e.date,a=new Date(t);return t?n.createElement(y.X2,{className:"last-modified-date-module--row--XJoYQ"},n.createElement(y.sg,null,n.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},w=function(e){var t=e.pageContext,a=e.children,i=e.location,p=e.Title,c=t.frontmatter,g=void 0===c?{}:c,h=t.relativePagePath,y=t.titleType,w=g.tabs,E=g.title,v=g.theme,x=g.description,N=g.keywords,P=g.date,C=(0,k.Z)().interiorTheme,T=(0,r.useStaticQuery)("2456312558").site.pathPrefix,_=T?i.pathname.replace(T,""):i.pathname,R=w?_.split("/").filter(Boolean).slice(-1)[0]||o()(w[0],{lower:!0}):"",z=v||C;return n.createElement(s.Z,{tabs:w,homepage:!1,theme:z,pageTitle:E,pageDescription:x,pageKeywords:N,titleType:y},n.createElement(m,{title:p?n.createElement(p,null):E,label:"label",tabs:w,theme:z}),w&&n.createElement(b,{title:E,slug:_,tabs:w,currentTab:R}),n.createElement(f.Z,{padded:!0},a,n.createElement(u,{relativePagePath:h}),n.createElement(A,{date:P})),n.createElement(d.Z,{pageContext:t,location:i,slug:_,tabs:w,currentTab:R}),n.createElement(l.Z,null))}}}]);
//# sourceMappingURL=component---src-pages-recipes-visualizing-output-mdx-fd063a1168985e35f4fb.js.map